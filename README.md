# Финансовый Telegram Bot

Telegram-бот на PyTelegramBotAPI для контроля доходов и расходов с категоризацией, статистикой и напоминаниями о превышении лимитов бюджета.

## Структура проекта

```
├── bot.py              # Основной файл бота с хендлерами
├── database.py         # Модуль для работы с базой данных
├── config.py           # Конфигурация приложения
├── requirements.txt    # Зависимости Python
└── README.md          # Документация
```

## Установка и настройка

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Создайте файл `.env` с настройками:
```env
BOT_TOKEN=your_bot_token_here
DB_HOST=your_database_host
DB_PORT=3306
DB_NAME=your_database_name
DB_USER=your_database_user
DB_PASSWORD=your_database_password
LOG_LEVEL=INFO
```

3. Запустите бота:
```bash
python bot.py
```

## Функциональность

- ✅ Подключение к удаленной базе данных MySQL
- ✅ Автоматическое получение структуры таблиц из БД
- ✅ Добавление операций простыми командами (+100 такси, -500 продукты)
- ✅ Отчеты по доходам и расходам (/report неделя, /report месяц)
- ✅ Управление лимитами бюджета (/budget)
- ✅ Автоматические уведомления о превышении лимитов
- ✅ Категоризация доходов и расходов
- ✅ Статистика и аналитика трат
- ✅ Логирование и обработка ошибок

## Команды бота

- `/start` - Начать работу с ботом
- `/help` - Показать список команд
- `/balance` - Текущий баланс за месяц
- `/report неделя` - Отчет за неделю
- `/report месяц` - Отчет за месяц
- `/budget` - Управление лимитами бюджета
- `/categories` - Просмотр доступных категорий
- `/status` - Проверить статус подключения к БД

## Добавление операций

Бот понимает простые команды для добавления доходов и расходов:

- `+100 такси` - добавить доход 100 рублей в категорию "такси"
- `-500 продукты` - добавить расход 500 рублей в категорию "продукты"
- `+2000 зарплата` - добавить доход 2000 рублей в категорию "зарплата"
- `-150 кафе` - добавить расход 150 рублей в категорию "кафе"

## Структура базы данных

Бот работает со следующими таблицами:

- **users** - пользователи (user_id, имя, валюта)
- **transactions** - транзакции (id, user_id, тип, сумма, категория, дата, описание)
- **categories** - категории (id, название, тип, user_id)
- **budgets** - бюджеты (user_id, категория, лимит, период)

## Архитектура

Код разделен на модули по функциональности:

- **bot.py** - Основная логика бота и хендлеры финансовых операций
- **database.py** - Работа с базой данных (подключение, запросы, аналитика)
- **config.py** - Конфигурация и настройки

## Разработка

Для добавления новых функций:

1. Добавьте новые хендлеры в класс `FinanceBotHandlers`
2. Используйте методы `DatabaseManager` для работы с БД
3. Структура таблиц получается автоматически из базы данных
4. Для новых команд добавьте обработчики в `setup_handlers()`

## Примеры использования

```
+1000 зарплата          # Доход 1000 рублей в категорию "зарплата"
-300 продукты           # Расход 300 рублей в категорию "продукты"
-50 кофе                # Расход 50 рублей в категорию "кофе"
/report месяц           # Отчет за текущий месяц
/balance                # Текущий баланс
/budget                 # Управление лимитами
```
